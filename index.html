<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>NDEx JS Library webpage</title>
  <script src="https://unpkg.com/ndex-client@0.0.2/dist/build/bundle.js"></script>

</head>

<body>
  <div id="content"></div>

  <!--Add buttons to initiate auth sequence and sign out-->
  <button id="authorize-button" style="display: none;">Authorize</button>
  <button id="signout-button" style="display: none;">Sign Out</button>
  <button id="get-summary-button" style="display: none;">Get Network Summary</button>

  <script type="text/javascript">

    var ndex = new ndexClient.NDEx('http://dev.ndexbio.org/v2');

    ndex.getStatus().then((response) => {
      var p = document.createElement('p');
      p.appendChild(document.createTextNode('Status: ' + response.message));
      document.getElementById('content').appendChild(p);
    });

    ndex.getNetworkSummary('9025e42a-9e3f-11e7-8676-06832d634f41',
      'a93fa15fae6a6c087ec1e2b562deaac930c083ea4cb110110247f5e40f88d46a').then((response) => {
        var p = document.createElement('p2');
        p.appendChild(document.createTextNode('Network Summary: ' + JSON.stringify(response)));
        document.getElementById('content').appendChild(p);
      });

    const cyRESTParams = {
      serverUrl: 'http://dev.ndexbio.org/v2',
      uuid: '9025e42a-9e3f-11e7-8676-06832d634f41',
      accessKey: 'a93fa15fae6a6c087ec1e2b562deaac930c083ea4cb110110247f5e40f88d46a'
    }

    const CYREST_BASE_URL = 'http://127.0.0.1'

    const importNetwork = (cyRESTPort) => {
      const importNetworkUrl =
        CYREST_BASE_URL + ':' + cyRESTPort + '/cyndex2/v1/networks'
      console.log('Calling CyREST POST:', importNetworkUrl)

      return fetch(importNetworkUrl, {
        method: 'POST',
        headers: {
          Accept: 'application/json',
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(cyRESTParams)
      })
    }
  </script>

  <button onClick='importNetwork("1234")'>Network 1</button>

</body>

</html>